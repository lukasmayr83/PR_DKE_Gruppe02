{% extends "base.html" %}
{% block content %}
<h1>Personenwagen</h1>
<h2>Übersicht</h2>
{% with messages = get_flashed_messages() %}
  {% if messages %}
    {% for msg in messages %}
      <p style="color: red; font-weight: bold; margin-bottom: 15px;">
        {{ msg }}
      </p>
    {% endfor %}
  {% endif %}
{% endwith %}
<div style="display: flex; align-items: flex-start; gap: 10px; margin-bottom: 15px;">
    <div style="display: flex; gap: 5px;">
        <form action="{{ url_for('hinzufuegen_personenwagen') }}" method="get">
            <button type="submit">Hinzufügen</button>
        </form>
        <button type="submit" form="main-action-form" name="action" value="bearbeiten">
            Bearbeiten
        </button>
        <button type="submit" form="main-action-form" name="action" value="loeschen"
                onclick="return confirm('Willst du den ausgewählten Wagen wirklich löschen?');">
            Löschen
        </button>
     </div>
    <form method="GET" action="{{ url_for('uebers_personenwagen') }}" style="display: flex; gap: 5px;">
        <input type="text" name="q" placeholder="Suchen..." value="{{ request.args.get('q','') }}">
        <button type="submit">Suchen</button>
    </form>
 </div>
<form method="POST" action="{{ url_for('personenwagen_action') }}" id="main-action-form">
    <table border="1">
        <thead>
            <tr>
                <th></th>
                <th>Personenwagenid</th>
                <th>Kapazität</th>
                <th>Maximales Gewicht</th>
                <th>Spurweite</th>
                <th>Ist Frei</th>
            </tr>
        </thead>
        <tbody>
            {% for wagen in personenwagen_liste %}
            <tr>
                <td><input type="radio" name="selected_wagen" value="{{ wagen.personenwagenid }}"></td>
                <td>{{ wagen.personenwagenid }}</td>
                <td>{{ wagen.kapazitaet }}</td>
                <td>{{ wagen.maxgewicht }}</td>
                <td>{{ wagen.spurweite }}</td>
                <td>
                    {% if wagen.istfrei is none %}
                        Frei
                    {% else %}
                        Zug {{ wagen.istfrei }}
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</form>
{% endblock %}