{% extends "base.html" %}
{% block content %}
<h1>Mitarbeiter</h1>
<h2>Übersicht</h2>

<div style="display: flex; align-items: flex-start; gap: 10px; margin-bottom: 15px;">
    <div style="display: flex; gap: 5px;">
        <form action="{{ url_for('hinzufuegen_mitarbeiter') }}" method="get">
            <button type="submit">Hinzufügen</button>
        </form>

        <button type="submit" form="main-action-form" name="action" value="bearbeiten">
            Bearbeiten
        </button>

        <button type="submit" form="main-action-form" name="action" value="loeschen"
                onclick="return confirm('Willst du den ausgewählten Mitarbeiter wirklich löschen?');">
            Löschen
        </button>
    </div>

    <form method="GET" action="{{ url_for('uebers_mitarbeiter') }}" style="display: flex; gap: 5px;">
        <input type="text" name="q" placeholder="Suchen..." value="{{ request.args.get('q','') }}">
        <button type="submit">Suchen</button>
    </form>
</div>

<form method="POST" action="{{ url_for('mitarbeiter_action') }}" id="main-action-form">
    <table border="1">
        <thead>
            <tr>
                <th></th>
                <th>SVNR</th>
                <th>Vorname</th>
                <th>Nachname</th>
                <th>Benutzername</th>
            </tr>
        </thead>
        <tbody>
            {% for mitarbeiter in mitarbeiter_liste %}
            <tr>
                <td><input type="radio" name="selected_mitarbeiter" value="{{ mitarbeiter.svnr }}"></td>
                <td>{{ mitarbeiter.svnr }}</td>
                <td>{{ mitarbeiter.vorname }}</td>
                <td>{{ mitarbeiter.nachname }}</td>
                <td>{{ mitarbeiter.user.username }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</form>

{% with messages = get_flashed_messages() %}
  {% if messages %}
    {% for msg in messages %}
      <p style="color: red; font-weight: bold; margin-bottom: 15px;">
        {{ msg }}
      </p>
    {% endfor %}
  {% endif %}
{% endwith %}

{% endblock %}
